{"Vehicle":[
    {
        "VehicleNo":"DL1LY8262",
        "Imei":"868003030929678",
        "Location":"Grand Trunk Road - Khampur Village - New Delhi- North West Delhi - Haryana - India",
        "Date":"2022-11-14 20:49:06.000",
        "Tempr":"12","Ignition":"1",
        "Lat":"28.829398",
        "Long":"77.13032",
        "Speed":"0",
        "Angle":"336"
    },
    {
        "VehicleNo":"DL1MA2608",
        "Imei":"359704071080406",
        "Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:48:25.000",
        "Tempr":"13",
        "Ignition":"0",
        "Lat":"28.846798",
        "Long":"76.859093",
        "Speed":"0",
        "Angle":"357"
    },
    {
        "VehicleNo":"DL1M9427",
        "Imei":"868003030974948",
        "Location":"Grand Trunk Road - Shampur Khampur - New Delhi- North West Delhi - Haryana - India",
        "Date":"2022-11-14 20:48:59.000",
        "Tempr":"12",
        "Ignition":"1",
        "Lat":"28.830404",
        "Long":"77.130009",
        "Speed":"5",
        "Angle":"328"
    },
    {
        "VehicleNo":"DL1MA1318",
        "Imei":"866551036947450",
        "Location":"State Highway 20 - Rohtak - Haryana - India",
        "Date":"2022-11-14 20:44:59.000",
        "Tempr":"13",
        "Ignition":"0",
        "Lat":"28.846962",
        "Long":"76.858827",
        "Speed":"0",
        "Angle":"0"
    },
    {
        "VehicleNo":"DL1MA2664",
        "Imei":"860016021998377","Location":"Main Narela Road - Alipur Village - New Delhi- North West Delhi - Delhi - India","Date":"2022-11-14 20:48:55.000","Tempr":"13","Ignition":"0","Lat":"28.799276","Long":"77.124676","Speed":"0","Angle":"0"
    },
    {"VehicleNo":"DL1MA4326","Imei":"866551037001307","Location":"Unnamed Road-Alipur-New Delhi-North West Delhi-Delhi-India","Date":"2022-11-14 20:48:32.000","Tempr":"22","Ignition":"0","Lat":"28.803504","Long":"77.134907","Speed":"9","Angle":"123"
    },
    {
        "VehicleNo":"DL1LAA6034","Imei":"861905228013302","Location":"Grand Trunk Road-Kumashpur-Sonepat-Haryana-India","Date":"2022-11-14 20:47:24.000","Tempr":"13","Ignition":"0","Lat":"28.997747","Long":"77.083058","Speed":"0","Angle":"359"
    },
    {
        "VehicleNo":"DL1MA1335","Imei":"355172104559826","Location":"State Highway 20-Rohtak-Haryana-India","Date":"2022-11-14 20:49:03.000","Tempr":"22","Ignition":"0","Lat":"28.846802","Long":"76.858764","Speed":"0","Angle":"1"
    },
    {
        "VehicleNo":"DL1N9447","Imei":"866551032203247","Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:48:46.000","Tempr":"13","Ignition":"0","Lat":"28.846844","Long":"76.859102","Speed":"0","Angle":"237"
    },
    {
        "VehicleNo":"DL1GC8086","Imei":"866551036858335","Location":"State Highway 20-Rohtak-Haryana-India","Date":"2022-11-14 20:45:19.000","Tempr":"13","Ignition":"0","Lat":"28.846751","Long":"76.859147","Speed":"0","Angle":"0"
    },
    {
        "VehicleNo":"DL1MA0414","Imei":"868003030214972","Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:46:27.000","Tempr":"12","Ignition":"0","Lat":"28.846929","Long":"76.858791","Speed":"0","Angle":"290"
    },
    {
        "VehicleNo":"DL1M9168","Imei":"355139081799105","Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:45:31.000","Tempr":"13","Ignition":"0","Lat":"28.846824","Long":"76.858987","Speed":"0","Angle":"301"
    },
    {
        "VehicleNo":"DL1GC8082","Imei":"866551036594252","Location":"State Highway 20-Rohtak-Haryana-India","Date":"2022-11-14 20:47:08.000","Tempr":"22","Ignition":"1","Lat":"28.844909","Long":"76.859004","Speed":"0","Angle":"90"
    },
    {
        "VehicleNo":"DL1LAA3686","Imei":"866551036823784","Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:44:22.000","Tempr":"13","Ignition":"0","Lat":"28.846969","Long":"76.859022","Speed":"0","Angle":"274"
    },
    {
        "VehicleNo":"DL1LAA3673","Imei":"861904228008392","Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:49:02.000","Tempr":"13","Ignition":"0","Lat":"28.846889","Long":"76.858987","Speed":"0","Angle":"258"
    },
    {
        "VehicleNo":"HR61A9515","Imei":"355172100479755","Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:45:57.000","Tempr":"13","Ignition":"0","Lat":"28.847009","Long":"76.858978","Speed":"0","Angle":"246"
    },
    {
        "VehicleNo":"DL1M8234","Imei":"355172103093736","Location":"10-Moulsari Avenue-DLF City Phase III-Sector 24-Gurgaon-Gurgaon-Haryana-India","Date":"2022-11-14 20:49:05.000","Tempr":"13","Ignition":"1","Lat":"28.4965","Long":"77.101671","Speed":"13","Angle":"296"
    },
    {
        "VehicleNo":"DL1LX5063","Imei":"868003030834472","Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:46:21.000","Tempr":"13","Ignition":"0","Lat":"28.846902","Long":"76.85896","Speed":"0","Angle":"323"
    },
    {
        "VehicleNo":"DL1M7230","Imei":"355172101727509","Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:45:42.000","Tempr":"94","Ignition":"0","Lat":"28.846847","Long":"76.858844","Speed":"0","Angle":"0"
    },
    {
        "VehicleNo":"DL1LGC9339","Imei":"355172104378227","Location":"State Highway 20 - Rohtak - Haryana - India","Date":"2022-11-14 20:18:33.000","Tempr":"22","Ignition":"0","Lat":"28.847893","Long":"76.857982","Speed":"0","Angle":"7"
    },
    {
        "VehicleNo":"DL1GC9346","Imei":"355172101114948","Location":"Grand Trunk Road-Badli-New Delhi-North West Delhi-Delhi-India","Date":"2022-11-14 20:49:01.000","Tempr":"22","Ignition":"1","Lat":"28.740564","Long":"77.153618","Speed":"37","Angle":"342"
    },
    {
        "VehicleNo":"DL1GC9790","Imei":"355172101890307","Location":"Delhi Noida Direct Flyway - Rose Garden - New Delhi- Gautam Buddh Nagar - Delhi - India","Date":"2022-11-14 20:48:18.000","Tempr":"13","Ignition":"0","Lat":"28.577582","Long":"77.302782","Speed":"0","Angle":"0"
    },
    {
        "VehicleNo":"DL1GC9794","Imei":"355139082449882","Location":"State Highway 20-Rohtak-Haryana-India","Date":"2022-11-14 20:45:58.000","Tempr":"13","Ignition":"0","Lat":"28.846724","Long":"76.859147","Speed":"0","Angle":"165"
    },
    {
        "VehicleNo":"DL1GE1411","Imei":"866551036671225","Location":"Bawana Road-Bankner-New Delhi-North West Delhi-Delhi-India","Date":"2022-11-14 20:45:29.000","Tempr":"13","Ignition":"0","Lat":"28.832769","Long":"77.076764","Speed":"0","Angle":"283"
    },
    {
        "VehicleNo":"DL1GE1490","Imei":"868003030834464","Location":"464-Industrial Estate-Sersa-Sector 53-Sonipat-Sonepat-Haryana-India","Date":"2022-11-14 20:47:42.000","Tempr":"12","Ignition":"0","Lat":"28.868991","Long":"77.135458","Speed":"0","Angle":"39"
    }]
}




<script>
        function initMap() {
            var map;
            var bounds = new google.maps.LatLngBounds();
            var mapOptions = {
                mapTypeId: 'roadmap'
            };
                            
            // Display a map on the web page
            map = new google.maps.Map(document.getElementById("mapCanvas"), mapOptions);
            map.setTilt(50);
                
            // Multiple markers location, latitude, and longitude
            var markers = [
                <?php if($result->num_rows > 0){
                    while($row = $result->fetch_assoc()){
                        echo '["'.$row['lcv_number'].'", '.$row['latitude'].', '.$row['longitude'].'],';
                    }
                }
                ?>
            ];

            console.log(markers)
                                
            // Info window content
            var infoWindowContent = [
                <?php if($result2->num_rows > 0){
                    while($row = $result2->fetch_assoc()){ ?>
                        ['<div class="info_content">' +
                        '<h3><?php echo $row['lcv_number']; ?></h3>' +
                        '<p><?php echo $row['lcv_number']; ?></p>' + '</div>'],
                <?php }
                }
                ?>
            ];
            console.log(infoWindowContent) 
            // Add multiple markers to map
            var infoWindow = new google.maps.InfoWindow(), marker, i;
            
            // Place each marker on the map  
            for( i = 0; i < markers.length; i++ ) {
                console.log("marker")
                var position = new google.maps.LatLng(markers[i][1], markers[i][2]);
                bounds.extend(position);
                marker = new google.maps.Marker({
                    position: position,
                    map: map,
                    title: markers[i][0]
                });
                console.log(i, marker)
                
                // Add info window to marker    
                google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function(evt) {
                        infoWindow.setContent(infoWindowContent[i][0]);
                        infoWindow.open(map, marker);
                    }
                })(marker, i));

                // Center the map to fit all markers on the screen
                map.fitBounds(bounds);
            }

            // Set zoom level
            var boundsListener = google.maps.event.addListener((map), 'bounds_changed', function(event) {
                this.setZoom(14);
                google.maps.event.removeListener(boundsListener);
            });
            
        }

        // Load initialize function
        google.maps.event.addEventListener(window, 'load', initMap);
    </script>
    